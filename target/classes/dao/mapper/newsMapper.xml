<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.INewsDao">
	<resultMap type="news" id="newsMap">
		<id column="news_id" property="news_id"></id>
		<result column="news_url" property="news_url"></result>
		<result column="news_title" property="news_title"></result>
		<result column="news_content" property="news_content"></result>
		<result column="news_date" property="news_date"></result>
		<result column="eng" property="eng"></result>
	</resultMap>

	<select id="selectSearchList" parameterType="java.util.HashMap"
		resultMap="newsMap">
		<!-- <bind name="Nkeyword" value="'%'+Nkeyword+'%'"/> -->
		<choose>
			<when test="eng == 1">
				SELECT * FROM news WHERE eng = 1
					<if test='NKeyword != ""'>
						and (
						news_title LIKE '%${NKeyword}%' <!-- 여기서 $는 ''을 빼고 순수 문자열을 말함 -->
						or news_content LIKE '%${NKeyword}%'
						)
					</if>
				ORDER BY news_id DESC
			</when>
			<otherwise>
				SELECT * FROM news WHERE eng is null  
					<if test='NKeyword != ""'>
						and (
						news_title LIKE '%${NKeyword}%' <!-- 여기서 $는 ''을 빼고 순수 문자열을 말함 -->
						OR news_content LIKE '%${NKeyword}%'
						)
					</if>
				ORDER BY news_id DESC
			</otherwise>
		</choose>
	</select>

	<select id="getNewsCount" resultType="int">
		SELECT COUNT(*) FROM news
	</select>

	<select id="selectNews" parameterType="int" resultMap="newsMap">
		SELECT *
		FROM news WHERE news_id=#{news_id}
	</select>
	<select id="selectAllNews" resultMap="newsMap">
		SELECT *
		FROM news 
	</select>
	
	<select id="getSearchListCount" parameterType="java.util.HashMap"
		resultType="int">
		SELECT COUNT(*) FROM (SELECT * FROM news
		WHERE 1=0
		<if test="news_title != null">
			OR news_title LIKE '%${news_title}%'
		</if>
		<if test="news_content != null">
			OR news_content LIKE '%${news_content}%'
		</if>
		) search
	</select>
</mapper>